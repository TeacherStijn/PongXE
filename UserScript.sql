CREATE USER C##game IDENTIFIED BY gamesqlpw1;

GRANT CREATE SESSION TO C##game;

GRANT CREATE TABLE TO C##game;

GRANT CREATE VIEW TO C##game;

GRANT CREATE SEQUENCE, CREATE PROCEDURE TO C##game;

GRANT CREATE TRIGGER TO C##game;

GRANT CREATE PROCEDURE TO C##game;

GRANT EXECUTE ANY PROCEDURE TO C##game;

ALTER USER C##game QUOTA 100M ON users;


-- Tabellen genereren:
CREATE TABLE Spelers (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    Gebruikersnaam VARCHAR2(50) NOT NULL,
    Wachtwoord VARCHAR2(255) NOT NULL,
    Status VARCHAR2(10) CHECK (Status IN ('online', 'offline')),
    Laatst_Online TIMESTAMP DEFAULT SYSTIMESTAMP,
	Alias VARCHAR2(50),
    CONSTRAINT pk_spelers PRIMARY KEY (ID),
    CONSTRAINT unq_spelers_gebruikersnaam UNIQUE (Gebruikersnaam)
);

CREATE TABLE Games (
    Game_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    Speler1_ID NUMBER NOT NULL,
    Speler2_ID NUMBER NOT NULL,
    Score_Speler1 NUMBER DEFAULT 0,
    Score_Speler2 NUMBER DEFAULT 0,
    Game_Start_Tijd TIMESTAMP DEFAULT SYSTIMESTAMP,
    Game_Eind_Tijd TIMESTAMP,
    CONSTRAINT pk_games PRIMARY KEY (Game_ID),
    CONSTRAINT fk_games_speler1 FOREIGN KEY (Speler1_ID) REFERENCES Spelers (ID),
    CONSTRAINT fk_games_speler2 FOREIGN KEY (Speler2_ID) REFERENCES Spelers (ID)
);

INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (1, 'user01', 'pass01', 'online', SYSTIMESTAMP, 'Ace');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (2, 'user02', 'pass02', 'offline', SYSTIMESTAMP, 'Blaze');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (3, 'user03', 'pass03', 'online', SYSTIMESTAMP, 'Cipher');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (4, 'user04', 'pass04', 'offline', SYSTIMESTAMP, 'Dart');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (5, 'user05', 'pass05', 'offline', SYSTIMESTAMP, 'Echo');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (6, 'user06', 'pass06', 'online', SYSTIMESTAMP, 'Falcon');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (7, 'user07', 'pass07', 'offline', SYSTIMESTAMP, 'GamerX');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (8, 'user08', 'pass08', 'online', SYSTIMESTAMP, 'Halo');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (9, 'user09', 'pass09', 'offline', SYSTIMESTAMP, 'Ivy');
INSERT INTO spelers (ID, GEBRUIKERSNAAM, WACHTWOORD, STATUS, LAATST_ONLINE, ALIAS) VALUES (10, 'user10', 'pass10', 'online', SYSTIMESTAMP, 'Jester');
